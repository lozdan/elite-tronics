(function(c,d){var b="SuperBox",a="3.0.9";c.fn.SuperBox=function(g){var m=c.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},g);var j=false,v=false,x=c('<div class="superbox-show"/>'),y=c('<media src="media/ajax-loader.gif" class="superbox-current-media"/>'),z=c('<a href="#" class="superbox-close"><i class="icon-remove-sign"></i></a>'),l=c('<a href="#" class="superbox-prev"><i class="icon-circle-arrow-left"></i></a>'),n=c('<a href="#" class="superbox-next"><i class="icon-circle-arrow-right"></i></a>'),h=c('<div class="superbox-float"/>'),w=this.find(">div"),q=this.find(">div:nth-child(8n)"),r=this.find(">div:nth-child(6n)"),t=this.find(">div:nth-child(4n)"),u=this.find(">div:nth-child(2n)");var o=function(A){var B=function(D){var F,G="superbox-"+D,C=["superbox-last","superbox-8","superbox-6","superbox-4","superbox-2"];if(D===8){F=q}else{if(D===6){F=r}else{if(D===4){F=t}else{if(D===2){F=u}}}}for(var E=C.length-1;E>=0;E--){w.removeClass(C[E])}w.addClass(G);F.add(w.last()).addClass("superbox-last");if(c(".superbox-show").outerWidth(true)!=w.width()*D){c(".superbox-show").outerWidth(w.width()*D)}};if(c(".superbox-active").width()>1024){B(8)}else{if(c(".superbox-active").width()>767){B(6)}else{if(c(".superbox-active").width()>320){B(4)}else{B(2)}}}};var i=(function(){var F=c(".superbox-show").outerWidth(true),E=m.height+(16*3),A=E,B=c(window).height()*0.8,D=m.view,C=0.6667;if(A>B){A=B}if((D==="landscape")&&(F<A/C)){A=F*C}if((D==="portrait")&&(F<A*C)){A=F/C}if((D==="square")&&(F<A)){A=F}c(".superbox-show").outerHeight(A)});var k=function(E){var B=!c(".superbox-show").length,A=E.hasClass("superbox-O"),L=!E.hasClass("superbox-last"),O=!E.nextAll(".superbox-last:first").next(".superbox-show").length,I=!E.next(".superbox-show").length,M=function(P){if(P==="A"){x.append(y).append(z).append(l).append(n).insertAfter(E.nextAll(".superbox-last:first"))}else{x.append(y).append(z).insertAfter(E)}i();o();F();c(".superbox-show").slideDown("slow",function(){K();J(true);G(true);if(v===false){c(".superbox-prev,.superbox-next").on("click",function(Q){f(c(this),Q);v=true})}})},F=function(){c(".superbox-show media.superbox-current-media").attr("src",E.find("media").data("media"));C()},C=function(){var Q=new Image(),P=new Image();Q.src=E.prev(".superbox-list").find("media").data("media");P.src=E.nextAll(".superbox-list:first").find("media").data("media")},K=function(){c("html, body").animate({scrollTop:c(".superbox-show").offset().top-E.width()},"medium")},J=function(P){if(P===true){w.removeClass("superbox-O");E.addClass("superbox-O")}else{w.removeClass("superbox-O")}},G=function(P){if(P===true){c(".superbox-show media.superbox-current-media").animate({opacity:1},750);if(j===false){N(true)}}else{c(".superbox-show media.superbox-current-media").animate({opacity:0},100,function(){F()})}},N=function(P){if(P===true){j=true;c(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0.7},750)}else{j=false;c(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0},100)}},H=function(){G(false);G(true);J(true)},D=function(){var P=function(){G(false);N(false);c(".superbox-show").slideUp(function(){c(this).remove();J(false);v=false})};c(".superbox-close").on("click",function(Q){Q.preventDefault();P()});if(A===true){P()}};if(A===false){if(L===true&&O===true){if(B===true){M("A")}else{G(false);N(false);c(".superbox-show").slideUp(function(){M("A")})}}else{if(L===false&&I===true){if(B===true){M("B")}else{G(false);N(false);c(".superbox-show").slideUp(function(){M("B")})}}else{H()}}}D()};var s=function(){c(window).resize(function(){if(c(".superbox-O").hasClass("superbox-last")){c(".superbox-show").insertAfter(c(".superbox-O"))}else{c(".superbox-show").insertAfter(c(".superbox-O").nextAll(".superbox-last:first"))}})};var p=function(){if(m.background!==null){c(".superbox-show ").css("background-color",m.background)}if(m.border!==null){c(".superbox-show media.superbox-current-media").css("border-color",m.border)}if(m.xColor!==null){c(".superbox-close, .superbox-prev, .superbox-next").css("color",m.xColor)}if(m.xShadow=="emboss"){c(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)")}else{if(m.xShadow=="embed"){c(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)")}}};var f=function(B,C){C.preventDefault();var D=null,A=null;if(C.keyCode==37||B.hasClass("superbox-prev")){D="prev";A=".superbox-list"}else{if(C.keyCode==39||B.hasClass("superbox-next")){D="nextAll";A=".superbox-list:first"}}if(D!==null){c(".superbox-O")[D](A).click()}};var e=function(){if(v===false){c(document.documentElement).keyup(function(A){f(c(this),A);v=true})}};this.addClass("superbox-active");w.addClass("superbox-list");o();c(window).resize(function(){i();o()});h.appendTo(this);w.on("mouseenter",function(){var A=new Image(),B=c(this).find("media").data("media");c(A).attr("src",B)});w.on("click",function(){k(c(this));p()});s();e();return this}})(jQuery);